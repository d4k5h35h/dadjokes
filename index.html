<html>
<head>
    <title>ICanHazDadJoke</title>
</head>
<body>
	<h1>It's Dad Joke Time!!!</h1>
	<p>
		Fresh Joke :- <span id="jokes"></span>
		<br>
	</p>

	<script>
		let ping = new sound('email.mp3');
		
		let api_url = 'https://icanhazdadjoke.com/';

		async function getJoke(){

			let options = {
 						   headers: {
     								 'accept': 'application/json'
									}
							}

			let response = await fetch(api_url, options);
			let data = await response.json();
			const {joke} = data;
			
			document.getElementById('jokes').textContent = joke;

			ping.play();
		}
		
		getJoke();
		setInterval(getJoke, 1000 * 15);

		function sound(src) {
  			this.sound = document.createElement("audio");
 			 this.sound.src = src;
  			this.sound.setAttribute("preload", "auto");
 			 this.sound.setAttribute("controls", "none");
 			 this.sound.style.display = "none";
 			 document.body.appendChild(this.sound);
  			this.play = function(){
  			  this.sound.play();
  			}
  			this.stop = function(){
   			 this.sound.pause();
			  }
		
		}
		

	</script>
</body>
</html>